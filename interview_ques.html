<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prepss</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React and ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;700;800&display=swap');
        
        body {
            font-family: 'JetBrains Mono', monospace;
            background-color: #050505;
            color: #dddddd;
            margin: 0;
            overflow: hidden; 
            height: 100vh;
        }

        .scanline {
            width: 100%;
            height: 2px;
            background: #dc2626;
            opacity: 0.1;
            position: fixed;
            z-index: 50;
            pointer-events: none;
            animation: scan 10s linear infinite;
        }
        
        @keyframes scan {
            0% { top: -10%; }
            100% { top: 110%; }
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #0a0a0a;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #dc2626;
        }

        @keyframes nav-slide-up {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-nav-item {
            animation: nav-slide-up 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }

        .glass-card {
            background: rgba(17, 17, 17, 0.95);
            border: 1px solid rgba(31, 41, 55, 1);
            transition: all 0.2s ease-in-out;
        }
        .glass-card:hover {
            border-color: rgba(220, 38, 38, 0.5);
            box-shadow: 0 0 25px rgba(220, 38, 38, 0.15);
        }

        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            padding: 1.5rem;
            box-sizing: border-box;
        }
        
        @media (min-width: 768px) {
            .app-container { padding: 3rem; }
        }

        .main-viewport {
            flex: 1;
            min-height: 0;
            overflow: hidden;
        }
        
        input[type="password"], input[type="text"] {
            caret-color: #dc2626;
        }
    </style>
</head>
<body class="custom-scrollbar selection:bg-red-600 selection:text-white">
    <div class="scanline"></div>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback, useMemo } = React;

        // --- Configuration ---
        // Utilizing Gemini 2.5 Flash as requested from the available models list and switching to v1 endpoint
        const GEMINI_MODEL = "gemini-2.5-flash";
        const API_VERSION = "v1";

        const fetchAIHint = async (question, key) => {
            console.log(`[AI] Attempting connection via ${API_VERSION}/models/${GEMINI_MODEL}...`);
            if (!key) return "API_KEY_REQUIRED";
            
            const prompt = `ACT AS: Cloud Security Interview Expert.
TASK: Provide 3-5 technical keywords and one interview hint for the question provided.
RESTRICTION: Use NO markdown, bolding, or headers. Respond ONLY in plain text.

FORMAT:
TOPICS: Topic 1, Topic 2, Topic 3
HINT: Your single-sentence advice here.

QUESTION: "${question}"`;
            
            const payload = {
                contents: [{ parts: [{ text: prompt }] }]
            };

            try {
                // Endpoint updated to stable v1
                const response = await fetch(`https://generativelanguage.googleapis.com/${API_VERSION}/models/${GEMINI_MODEL}:generateContent?key=${key}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                
                const result = await response.json();
                if (!response.ok) {
                    console.error(`[AI] API Error:`, result);
                    return `API_ERROR: ${result.error?.message || 'REQUEST_FAILED'}`;
                }
                
                const text = result.candidates?.[0]?.content?.parts?.[0]?.text;
                return text || 'EMPTY_RESPONSE';
            } catch (error) {
                console.error("[AI] Network Exception:", error);
                return `HINT_ERROR: ${error.message}`;
            }
        };

        const App = () => {
            const [categories, setCategories] = useState([]);
            const [searchTerm, setSearchTerm] = useState('');
            const [selectedQuestion, setSelectedQuestion] = useState(null);
            const [aiHint, setAiHint] = useState('');
            const [isLoadingHint, setIsLoadingHint] = useState(false);
            const [isLoadingQuestions, setIsLoadingQuestions] = useState(true);
            const [isSyncing, setIsSyncing] = useState(false);
            const [error, setError] = useState(null);
            const [isMenuOpen, setIsMenuOpen] = useState(false);
            
            const [storedKey, setStoredKey] = useState(localStorage.getItem('PEACHY_GEMINI_KEY') || '');
            const [showConfig, setShowConfig] = useState(false);

            const formatHint = (text) => text.replace(/[#*`>]/g, '').trim();

            const parseMarkdown = useCallback((md) => {
                try {
                    const lines = md.split('\n');
                    const sections = [];
                    let currentCategory = 'GENERAL_INTEL';
                    let questions = [];

                    lines.forEach(line => {
                        const categoryMatch = line.match(/^#{1,3}\s+(.+)/);
                        if (categoryMatch) {
                            if (questions.length > 0) {
                                sections.push({ title: currentCategory.toUpperCase().replace(/\s/g, '_'), questions });
                            }
                            currentCategory = categoryMatch[1].trim();
                            questions = [];
                        } else {
                            const questionMatch = line.match(/^(\d+\.|-)\s+(.+)/);
                            if (questionMatch && (questionMatch[2].trim().endsWith('?') || questionMatch[2].trim().toLowerCase().includes('cloud'))) {
                                questions.push(questionMatch[2].trim());
                            }
                        }
                    });
                    
                    if (questions.length > 0) {
                        sections.push({ title: currentCategory.toUpperCase().replace(/\s/g, '_'), questions });
                    }
                    return sections;
                } catch (err) {
                    console.error("[SYSTEM] Markdown parse error:", err);
                    return [];
                }
            }, []);

            const fetchData = useCallback(async (isSilent = false) => {
                if (!isSilent) setIsLoadingQuestions(true);
                setIsSyncing(true);
                setError(null);
                try {
                    const res = await fetch('https://raw.githubusercontent.com/peachycloudsecurity/awesome-cloud-security-interview/refs/heads/main/README.md');
                    if (!res.ok) throw new Error(`HTTP_${res.status}_FAILED`);
                    
                    const text = await res.text();
                    const parsed = parseMarkdown(text);
                    if (parsed.length === 0) throw new Error('DATA_STRUCTURE_INVALID');
                    
                    setCategories(parsed);
                } catch (err) {
                    console.error("[SYSTEM] Sync failed:", err);
                    setError(err.message);
                } finally {
                    setIsLoadingQuestions(false);
                    setIsSyncing(false);
                }
            }, [parseMarkdown]);

            useEffect(() => {
                fetchData();
            }, [fetchData]);

            const handleQuestionClick = async (q) => {
                setSelectedQuestion(q);
                if (!storedKey) {
                    setAiHint("AI_LINK_OFFLINE");
                    return;
                }
                if (isLoadingHint) return;
                
                setAiHint('');
                setIsLoadingHint(true);
                
                try {
                    const hint = await fetchAIHint(q, storedKey);
                    setAiHint(formatHint(hint));
                } catch (err) {
                    setAiHint("HINT_ERROR: CHECK_CONSOLE");
                } finally {
                    setIsLoadingHint(false);
                }
            };

            const saveConfig = (e) => {
                e.preventDefault();
                const key = e.target.elements.apiKey.value.trim();
                if (key) {
                    localStorage.setItem('PEACHY_GEMINI_KEY', key);
                    setStoredKey(key);
                    setShowConfig(false);
                }
            };

            const navLinks = [
                { name: "HOME", url: "index.html" },
                { name: "INTEL", url: "intel.html" },
                { name: "BLOGS", url: "blogs.html" },
                { name: "REPORTS", url: "Disclosed-Reports/reports_index.html" },
                { name: "JOURNAL", url: "journal.html" },
                { name: "PRIVATE", url: "private.html" }
            ];

            const filteredCategories = useMemo(() => {
                return categories.map(cat => ({
                    ...cat,
                    questions: cat.questions.filter(q => q.toLowerCase().includes(searchTerm.toLowerCase()))
                })).filter(cat => cat.questions.length > 0);
            }, [categories, searchTerm]);

            return (
                <div className="app-container">
                    <div className="fixed inset-0 pointer-events-none overflow-hidden -z-10">
                        <div className="absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-red-600/5 blur-[120px] rounded-full animate-pulse"></div>
                    </div>

                    {showConfig && (
                        <div className="fixed inset-0 z-[200] flex items-center justify-center p-6 bg-black/95 backdrop-blur-md">
                            <form onSubmit={saveConfig} className="glass-card p-8 max-w-md w-full space-y-6 border-red-600/50 animate-nav-item">
                                <div className="space-y-2">
                                    <div className="flex justify-between items-start">
                                        <h2 className="text-white font-black tracking-tighter uppercase text-xl">Tactical_Config</h2>
                                        <button type="button" onClick={() => setShowConfig(false)} className="text-zinc-600 hover:text-white transition-colors text-xs font-black">
                                            [CLOSE]
                                        </button>
                                    </div>
                                    <p className="text-zinc-500 text-[10px] leading-relaxed uppercase tracking-widest font-bold">
                                        Provide your Gemini API key to enable AI suggestions. Key is stored locally in your browser cache and is never sent to a server.
                                    </p>
                                </div>
                                <div className="space-y-4">
                                    <input 
                                        name="apiKey"
                                        type="password" 
                                        placeholder="GEMINI_API_KEY_STRING..."
                                        defaultValue={storedKey}
                                        className="w-full px-4 py-3 bg-zinc-900/50 border border-zinc-800 text-sm focus:border-red-600 outline-none text-white font-mono placeholder:text-zinc-700"
                                        required
                                    />
                                    <button 
                                        type="submit"
                                        className="w-full bg-red-600 hover:bg-red-700 text-white font-black py-3 uppercase tracking-[0.2em] text-xs transition-all active:scale-95 shadow-lg"
                                    >
                                        Establish_AI_Link
                                    </button>
                                </div>
                            </form>
                        </div>
                    )}

                    <header className="mb-10 border-b border-zinc-800 pb-12 shrink-0">
                        <div className="flex flex-col md:flex-row justify-between items-start md:items-center gap-8">
                            <div className="space-y-4">
                                <div className="flex items-center gap-4">
                                    <div className="flex items-center gap-2 text-[10px] font-black tracking-[0.2em] text-zinc-500 bg-zinc-900/30 px-4 py-2 border border-zinc-800 w-max shadow-sm">
                                        {isSyncing ? '>> SYNCING_DATA' : '>> DATA_SYNCED'}
                                    </div>
                                    <button 
                                        onClick={() => fetchData(true)}
                                        disabled={isSyncing}
                                        className="text-[10px] font-black tracking-[0.2em] text-zinc-400 hover:text-red-600 bg-zinc-900/50 px-4 py-2 border border-zinc-800 hover:border-red-600/40 transition-all disabled:opacity-50 group uppercase"
                                    >
                                        [SYNC_REPO]
                                    </button>
                                    <button 
                                        onClick={() => setShowConfig(true)}
                                        className="text-[10px] font-black tracking-[0.2em] text-zinc-400 hover:text-white bg-zinc-900/50 px-4 py-2 border border-zinc-800 transition-all uppercase"
                                    >
                                        [CONFIGURE]
                                    </button>
                                </div>
                                <h1 className="text-white text-4xl md:text-5xl font-black tracking-tighter uppercase leading-none">Interview_Prep</h1>
                                <p className="text-zinc-500 text-sm font-light uppercase">
                                    <span className="text-red-600">{" >> "}</span> TARGET_DOMAINS: CLOUD_SEC, INFRA_AS_CODE, APP_SEC
                                </p>
                            </div>
                            <div className="flex-1 max-w-md w-full relative group">
                                <input 
                                    type="text" 
                                    placeholder="SEARCH..."
                                    className="w-full px-6 py-3 bg-zinc-900/50 border border-zinc-800 text-sm focus:border-red-600 outline-none transition-all placeholder:text-zinc-700 focus:bg-zinc-900"
                                    value={searchTerm}
                                    onChange={(e) => setSearchTerm(e.target.value)}
                                />
                            </div>
                        </div>
                    </header>

                    <div className="grid grid-cols-1 lg:grid-cols-12 gap-8 main-viewport">
                        <div className="lg:col-span-7 h-full flex flex-col min-h-0">
                            <div className="flex-1 overflow-y-auto custom-scrollbar pr-4 space-y-16 pb-32">
                                {isLoadingQuestions ? (
                                    <div className="glass-card p-16 text-center border-dashed border-zinc-800">
                                        <p className="text-xs tracking-widest text-zinc-500 font-bold uppercase animate-pulse">Decrypting Question Stream...</p>
                                    </div>
                                ) : error ? (
                                    <div className="border border-red-900/50 bg-red-950/20 p-8 text-red-500 flex flex-col items-center gap-4 text-center">
                                        <p className="text-xs font-black tracking-widest uppercase">!! {error} !!</p>
                                        <button onClick={() => fetchData()} className="text-[10px] font-black underline hover:text-white uppercase tracking-widest">Retry_Access</button>
                                    </div>
                                ) : (
                                    filteredCategories.map((cat, idx) => (
                                        <section key={idx} className="animate-nav-item" style={{ animationDelay: `${idx * 50}ms` }}>
                                            <div className="flex items-center gap-4 mb-8 sticky top-0 bg-[#050505]/95 backdrop-blur-sm z-[5] py-2 border-b border-zinc-900/50">
                                                <div className="h-px bg-zinc-800 flex-1"></div>
                                                <h3 className="text-[10px] font-black tracking-[0.4em] text-red-600 uppercase whitespace-nowrap px-6 py-1.5 border border-zinc-800 bg-zinc-900/80 shadow-sm">
                                                    {cat.title}
                                                </h3>
                                                <div className="h-px bg-zinc-800 flex-1"></div>
                                            </div>
                                            <div className="space-y-4">
                                                {cat.questions.map((q, qIdx) => (
                                                    <button
                                                        key={qIdx}
                                                        onClick={() => handleQuestionClick(q)}
                                                        className={`w-full text-left p-6 glass-card group relative ${
                                                            selectedQuestion === q 
                                                            ? 'border-red-600/60 bg-red-600/[0.04] shadow-[0_0_20px_rgba(220,38,38,0.12)]' 
                                                            : 'hover:bg-zinc-900/60 cursor-pointer'
                                                        }`}
                                                    >
                                                        <div className="flex items-start gap-5">
                                                            <span className={`text-[10px] mt-1 font-bold ${selectedQuestion === q ? 'text-red-600' : 'text-zinc-700'}`}>
                                                                {String(qIdx + 1).padStart(2, '0')}
                                                            </span>
                                                            <span className={`flex-1 text-sm leading-relaxed ${selectedQuestion === q ? 'text-white font-black' : 'text-zinc-400 transition-colors group-hover:text-zinc-200'}`}>
                                                                {q}
                                                            </span>
                                                            <span className={`text-[10px] font-black transition-all ${selectedQuestion === q ? 'text-red-600' : 'text-zinc-800 group-hover:text-red-600'}`}>
                                                                {">>"}
                                                            </span>
                                                        </div>
                                                    </button>
                                                ))}
                                            </div>
                                        </section>
                                    ))
                                )}
                            </div>
                        </div>

                        <aside className="lg:col-span-5 h-full flex flex-col min-h-0 space-y-6">
                            <div className="flex-1 overflow-y-auto custom-scrollbar pr-1 pb-32 space-y-6">
                                <div className="glass-card p-8 border-red-600/30 bg-gradient-to-b from-red-600/[0.04] to-transparent shadow-lg animate-nav-item">
                                    <div className="flex items-center gap-3 mb-6">
                                        <h4 className="font-black text-[11px] uppercase tracking-[0.3em] text-white underline decoration-red-600 decoration-2 underline-offset-8">QUESTIONS CREDITS</h4>
                                    </div>
                                    <div className="space-y-6">
                                        <div className="flex items-center gap-5">
                                            <div>
                                                <p className="text-[9px] text-zinc-600 font-black tracking-widest uppercase">CREATORS OF THIS INTERVIEW SHEET</p>
                                                <p className="text-[12px] font-bold text-zinc-200">Divyanshu sir & Anjali Mam</p>
                                            </div>
                                        </div>
                                        <div className="flex items-center gap-5 group">
                                            <a href="https://peachycloudsecurity.com/guides/cloud-security-interview" target="_blank" className="block outline-none">
                                                <p className="text-[9px] text-zinc-600 font-black tracking-widest uppercase">OFFICIAL INTERVIEW SHEET</p>
                                                <p className="text-[12px] font-bold text-red-600 hover:underline">peachycloudsecurity.com/guides/...</p>
                                            </a>
                                        </div>
                                        <div className="flex items-center gap-5 group">
                                            <a href="https://peachycloudsecurity.com" target="_blank" className="block outline-none">
                                                <p className="text-[9px] text-zinc-600 font-black tracking-widest uppercase">MORE SUCH CONTENT</p>
                                                <p className="text-[12px] font-bold text-zinc-400 hover:text-white">peachycloudsecurity.com</p>
                                            </a>
                                        </div>
                                    </div>
                                </div>

                                <div className="glass-card overflow-hidden animate-nav-item" style={{ animationDelay: '100ms' }}>
                                    <div className="bg-zinc-900/80 backdrop-blur-sm border-b border-zinc-800 px-6 py-4 flex items-center justify-between">
                                        <div className="flex items-center gap-2">
                                            <span className="text-white font-black text-[10px] tracking-[0.2em] uppercase">AI SUGGESTIONS</span>
                                        </div>
                                        <div className={`text-[8px] font-bold tracking-widest ${isLoadingHint ? 'text-yellow-500 animate-pulse' : (storedKey ? 'text-zinc-600' : 'text-red-600')}`}>
                                            {isLoadingHint ? 'CONNECTING_AI_NODE...' : (storedKey ? 'CONNECTED' : 'NOT CONNECTED, CLICK CONFIGURE AND PUT YOUR API KEY')}
                                        </div>
                                    </div>
                                    <div className="p-8 min-h-[350px]">
                                        {!selectedQuestion ? (
                                            <div className="py-24 text-center opacity-30">
                                                <p className="text-[10px] tracking-widest font-black uppercase border border-zinc-800 py-4 inline-block px-8 animate-pulse">Monitoring Question Selection...</p>
                                            </div>
                                        ) : isLoadingHint ? (
                                            <div className="py-24 text-center">
                                                <p className="text-[10px] tracking-widest font-black uppercase text-red-600 italic animate-pulse">Processing Intel...</p>
                                            </div>
                                        ) : (
                                            <div className="space-y-10 animate-nav-item">
                                                {aiHint === "AI_LINK_OFFLINE" ? (
                                                    <div className="space-y-6 text-center border border-red-900/30 p-6 bg-red-950/10 rounded">
                                                        <p className="text-[11px] leading-relaxed text-zinc-400 font-bold uppercase tracking-wider">
                                                            Tactical suggestions are offline. To enable interview suggestions for this question, you must put the Gemini API key in the box above.
                                                        </p>
                                                        <p className="text-[9px] text-zinc-600 uppercase border-t border-red-900/20 pt-4">
                                                            Note: Check the source code of this website; your API key is not stored or forwarded anywhere except your device.
                                                        </p>
                                                        <button onClick={() => setShowConfig(true)} className="text-[10px] bg-zinc-900 border border-zinc-800 px-6 py-2 hover:border-red-600 transition-all font-black text-white uppercase tracking-widest">Open_Configuration</button>
                                                    </div>
                                                ) : (
                                                    <React.Fragment>
                                                        <div className="space-y-4">
                                                            <div className="flex items-center gap-2 text-zinc-500">
                                                                <span className="text-[10px] font-black uppercase tracking-[0.2em] text-red-600">[Key_Topics]</span>
                                                            </div>
                                                            <div className="p-5 bg-zinc-900/40 border border-zinc-800 text-[13px] leading-relaxed text-zinc-200 font-bold border-l-4 border-l-red-600 shadow-inner">
                                                                {aiHint.includes('TOPICS:') ? aiHint.split('HINT:')[0].replace('TOPICS:', '').trim() : aiHint}
                                                            </div>
                                                        </div>
                                                        <div className="space-y-4">
                                                            <div className="flex items-center gap-2 text-zinc-500">
                                                                <span className="text-[10px] font-black uppercase tracking-[0.2em] text-red-600">[Strategy_Advice]</span>
                                                            </div>
                                                            <div className="p-5 bg-zinc-900/40 border border-zinc-800 text-[13px] leading-relaxed text-zinc-400 italic">
                                                                {aiHint.includes('HINT:') ? aiHint.split('HINT:')[1].trim() : "ADVICE_STREAM_EMPTY"}
                                                            </div>
                                                        </div>
                                                    </React.Fragment>
                                                )}
                                                <div className="pt-8 border-t border-zinc-800/50 flex items-start gap-4">
                                                    <p className="text-[9px] text-zinc-600 uppercase font-black tracking-widest leading-relaxed">
                                                        <span className="text-red-600 underline underline-offset-4 mr-2">!WARNING:</span> Generated by automated AI agent. Verify via official documentation.
                                                    </p>
                                                </div>
                                            </div>
                                        )}
                                    </div>
                                </div>
                            </div>
                        </aside>
                    </div>

                    <div 
                        className="fixed bottom-0 left-0 w-full z-[100] flex flex-col items-center"
                        onMouseEnter={() => setIsMenuOpen(true)}
                        onMouseLeave={() => setIsMenuOpen(false)}
                    >
                        {isMenuOpen && (
                            <nav className="w-full max-w-5xl bg-[#0a0a0a] border border-red-600/30 border-b-0 rounded-t-[2rem] flex flex-wrap justify-evenly items-center p-10 gap-6 shadow-2xl animate-in slide-in-from-bottom-10">
                                {navLinks.map((link, i) => (
                                    <a 
                                        key={i} 
                                        href={link.url}
                                        target="_blank"
                                        style={{ animationDelay: `${i * 50}ms` }}
                                        className="animate-nav-item opacity-0 flex items-center gap-4 px-6 py-4 rounded-xl bg-zinc-900 border border-zinc-800 hover:border-red-600 hover:bg-red-600/5 transition-all group font-black text-[10px] uppercase tracking-widest w-full md:w-auto text-center hover:scale-105 active:scale-95 shadow-lg"
                                    >
                                        {link.name}
                                    </a>
                                ))}
                            </nav>
                        )}
                        <div className={`w-full py-5 text-center font-black tracking-[0.8em] text-[10px] transition-all duration-700 cursor-pointer ${isMenuOpen ? 'bg-white text-black' : 'bg-red-600 text-white shadow-lg'}`}>
                            NAV [^]
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>